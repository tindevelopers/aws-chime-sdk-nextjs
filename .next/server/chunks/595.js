"use strict";exports.id=595,exports.ids=[595],exports.modules={8595:(e,o,t)=>{t.r(o),t.d(o,{default:()=>r});var i=t(997),n=t(6689);function r({deviceController:e,showVoiceFocus:o=!0,showOutputControl:t=!0,showLevelMeter:r=!0,style:l={}}){let[d,s]=(0,n.useState)(!1),[a,c]=(0,n.useState)([]),[u,p]=(0,n.useState)([]),[x,g]=(0,n.useState)(""),[h,D]=(0,n.useState)(""),[f,m]=(0,n.useState)(0),[v,b]=(0,n.useState)(null),[y,C]=(0,n.useState)(null),[A,S]=(0,n.useState)(!1),j=(0,n.useRef)(null),F=(0,n.useRef)(null),k=(0,n.useRef)(null),w=async e=>{try{console.log("StandaloneAudioControl: Starting audio monitoring for device:",e),v&&v.getTracks().forEach(e=>e.stop());let o=await navigator.mediaDevices.getUserMedia({audio:{deviceId:e?{exact:e}:void 0},video:!1});if(b(o),C(null),j.current&&r){let e=j.current.createMediaStreamSource(o),t=j.current.createAnalyser();t.fftSize=256,t.smoothingTimeConstant=.8,e.connect(t),F.current=t;let i=new Uint8Array(t.frequencyBinCount),n=()=>{if(F.current&&!d){F.current.getByteFrequencyData(i);let e=i.reduce((e,o)=>e+o)/i.length;m(Math.floor(Math.min(e/128*100,100)))}else m(0);k.current=requestAnimationFrame(n)};n()}console.log("StandaloneAudioControl: Audio monitoring started successfully")}catch(e){console.error("StandaloneAudioControl: Error starting audio monitoring:",e),C(`Failed to access microphone: ${e}`)}},R=async e=>{console.log("StandaloneAudioControl: Changing audio device to:",e),g(e),d||await w(e)},z=e=>{console.log("StandaloneAudioControl: Changing output device to:",e),D(e)},I=async()=>{let e=!d;s(e),e?(v&&(v.getTracks().forEach(e=>e.stop()),b(null)),m(0),console.log("StandaloneAudioControl: Audio muted")):(x&&await w(x),console.log("StandaloneAudioControl: Audio unmuted"))},M={display:"flex",flexDirection:"column",alignItems:"center",gap:"20px",padding:"25px",border:"1px solid #ddd",borderRadius:"10px",backgroundColor:"#f9f9f9",maxWidth:"600px",margin:"0 auto",...l},W=(e=!1)=>({padding:"10px 15px",borderRadius:"6px",border:"none",cursor:"pointer",fontSize:"14px",fontWeight:"bold",backgroundColor:e?"#007bff":"#6c757d",color:"white",transition:"background-color 0.2s ease",minWidth:"100px"}),T={padding:"8px 12px",borderRadius:"4px",border:"1px solid #ced4da",fontSize:"14px",backgroundColor:"white",minWidth:"200px"},B={width:`${f}%`,height:"100%",backgroundColor:f>70?"#dc3545":f>30?"#ffc107":"#28a745",transition:"width 0.1s ease",borderRadius:"10px"};return(0,i.jsxs)("div",{style:M,children:[i.jsx("h3",{style:{margin:"0",color:"#333",textAlign:"center"},children:"\uD83C\uDFA4 Standalone Audio Controls"}),y&&(0,i.jsxs)("div",{style:{padding:"10px 15px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"5px",border:"1px solid #f5c6cb",fontSize:"14px",textAlign:"center"},children:["❌ ",y]}),r&&(0,i.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[(0,i.jsxs)("div",{style:{marginBottom:"10px",fontSize:"14px",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px"},children:[i.jsx("span",{style:{fontSize:"20px"},children:d?"\uD83D\uDD07":f>60?"\uD83D\uDD0A":f>30?"\uD83D\uDD09":f>5?"\uD83D\uDD08":"\uD83D\uDCE2"}),(0,i.jsxs)("span",{children:["Audio Level: ",f,"%"]})]}),i.jsx("div",{style:{width:"300px",height:"20px",backgroundColor:"#e9ecef",borderRadius:"10px",overflow:"hidden",border:"1px solid #adb5bd",position:"relative"},children:i.jsx("div",{style:B})}),i.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"#666"},children:d?"\uD83D\uDD07 Microphone muted":f>5?"\uD83C\uDFB5 Audio detected":"\uD83D\uDCE2 Speak to test microphone"})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"15px",alignItems:"center",flexWrap:"wrap",justifyContent:"center"},children:[i.jsx("button",{onClick:I,style:W(d),title:d?"Unmute microphone":"Mute microphone",children:d?"\uD83D\uDD07 Unmute":"\uD83C\uDFA4 Mute"}),o&&i.jsx("button",{onClick:()=>{S(!A),console.log("StandaloneAudioControl: Voice Focus toggled:",!A)},style:W(A),title:"Toggle noise suppression",children:A?"\uD83C\uDFAF VF ON":"\uD83C\uDFAF VF OFF"})]}),(0,i.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"15px"},children:[(0,i.jsxs)("div",{style:{textAlign:"center"},children:[i.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold",color:"#555"},children:"\uD83C\uDFA4 Microphone Device:"}),i.jsx("select",{value:x,onChange:e=>R(e.target.value),style:T,children:a.map(e=>i.jsx("option",{value:e.deviceId,children:e.label||`Microphone ${e.deviceId.slice(0,8)}...`},e.deviceId))}),(0,i.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginTop:"3px"},children:[a.length," microphone(s) available"]})]}),t&&(0,i.jsxs)("div",{style:{textAlign:"center"},children:[i.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold",color:"#555"},children:"\uD83D\uDD0A Speaker Device:"}),i.jsx("select",{value:h,onChange:e=>z(e.target.value),style:T,children:u.map(e=>i.jsx("option",{value:e.deviceId,children:e.label||`Speaker ${e.deviceId.slice(0,8)}...`},e.deviceId))}),(0,i.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginTop:"3px"},children:[u.length," speaker(s) available"]})]})]}),(0,i.jsxs)("div",{style:{fontSize:"14px",color:d?"#dc3545":"#28a745",textAlign:"center",padding:"10px 15px",backgroundColor:d?"#f8d7da":"#d4edda",borderRadius:"5px",border:`1px solid ${d?"#f5c6cb":"#c3e6cb"}`,maxWidth:"400px"},children:[d?"\uD83D\uDD07 Microphone is muted":"\uD83C\uDFA4 Microphone is active",o&&(A?" • \uD83C\uDFAF Noise suppression ON":" • \uD83C\uDFAF Noise suppression OFF")]}),(0,i.jsxs)("div",{style:{fontSize:"12px",color:"#666",textAlign:"center",maxWidth:"500px",lineHeight:"1.4",backgroundColor:"#f8f9fa",padding:"12px",borderRadius:"5px",border:"1px solid #e9ecef"},children:["\uD83D\uDCA1 ",i.jsx("strong",{children:"Features:"})," Real device selection and monitoring,",o&&" noise suppression toggle,",t&&" speaker output control,",r&&" live audio level meter,","direct browser API integration for immediate testing."]})]})}}};