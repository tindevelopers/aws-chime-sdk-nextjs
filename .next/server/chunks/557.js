"use strict";exports.id=557,exports.ids=[557],exports.modules={1557:(e,r,o)=>{o.r(r),o.d(r,{default:()=>n});var t=o(997),i=o(6689);function n({style:e={}}){let[r,o]=(0,i.useState)(null),[n,d]=(0,i.useState)(""),[c,a]=(0,i.useState)(!1),[l,s]=(0,i.useState)(!1),[u,p]=(0,i.useState)([]),[x,h]=(0,i.useState)(""),[g,f]=(0,i.useState)(0),[b,y]=(0,i.useState)(!1),v=(0,i.useRef)(null),m=(0,i.useRef)(null),D=(0,i.useRef)(),w=async()=>{if("undefined"==typeof navigator||!navigator.mediaDevices){d("Media devices not supported");return}try{let e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind);p(e),e.length>0&&!x&&h(e[0].deviceId)}catch(e){console.error("Error enumerating devices:",e),d("Could not access media devices")}},S=e=>{try{v.current=new(window.AudioContext||window.webkitAudioContext),m.current=v.current.createAnalyser(),v.current.createMediaStreamSource(e).connect(m.current),m.current.fftSize=256;let r=m.current.frequencyBinCount,o=new Uint8Array(r),t=()=>{if(m.current){m.current.getByteFrequencyData(o);let e=0;for(let t=0;t<r;t++)e+=o[t];let t=e/r;f(Math.floor(t/255*100))}D.current=requestAnimationFrame(t)};t()}catch(e){console.error("Error setting up audio analysis:",e)}},j=()=>{D.current&&cancelAnimationFrame(D.current),v.current&&(v.current.close(),v.current=null),m.current=null,f(0)},C=async e=>{a(!0),d("");try{let r=await navigator.mediaDevices.getUserMedia({audio:!e||{deviceId:{exact:e}},video:!1});o(r),s(!0),S(r),await w()}catch(e){console.error("Error accessing microphone:",e),"NotAllowedError"===e.name?d("Microphone access denied. Please allow microphone access in your browser settings."):"NotFoundError"===e.name?d("No microphone device found."):"NotReadableError"===e.name?d("Microphone is already in use by another application."):d(`Microphone error: ${e.message}`)}finally{a(!1)}},A=()=>{r&&(r.getTracks().forEach(e=>e.stop()),o(null),s(!1)),j()},k=async e=>{l&&(A(),await C(e)),h(e)},M={display:"flex",flexDirection:"column",alignItems:"center",gap:"15px",padding:"20px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f9f9f9",...e},R={width:`${g}%`,height:"100%",backgroundColor:g>70?"#dc3545":g>30?"#ffc107":"#28a745",transition:"width 0.1s ease",borderRadius:"10px"};return b?(0,t.jsxs)("div",{style:M,children:[t.jsx("h3",{style:{margin:"0 0 10px 0",color:"#333"},children:"\uD83C\uDFA4 Microphone Test"}),u.length>1&&(0,t.jsxs)("div",{style:{width:"100%",maxWidth:"300px"},children:[t.jsx("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",fontWeight:"bold"},children:"Microphone:"}),t.jsx("select",{value:x,onChange:e=>k(e.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px"},children:u.map(e=>t.jsx("option",{value:e.deviceId,children:e.label||`Microphone ${e.deviceId.slice(0,8)}`},e.deviceId))})]}),(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsxs)("div",{style:{marginBottom:"8px",fontSize:"14px",fontWeight:"bold"},children:["Audio Level: ",g,"%"]}),t.jsx("div",{style:{width:"200px",height:"20px",backgroundColor:"#e9ecef",borderRadius:"10px",overflow:"hidden",border:"1px solid #adb5bd"},children:t.jsx("div",{style:R})}),t.jsx("div",{style:{marginTop:"5px",fontSize:"12px",color:"#666"},children:g>0?"\uD83C\uDFB5 Audio detected":"\uD83D\uDD07 No audio"})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[l?t.jsx("button",{onClick:A,style:{padding:"10px 20px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"\uD83D\uDED1 Stop Microphone"}):t.jsx("button",{onClick:()=>C(x),disabled:c,style:{padding:"10px 20px",backgroundColor:c?"#ccc":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:c?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:c?"Starting...":"\uD83C\uDFA4 Start Microphone"}),t.jsx("button",{onClick:w,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"\uD83D\uDD04 Refresh"})]}),n&&(0,t.jsxs)("div",{style:{padding:"15px",backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"4px",color:"#721c24",fontSize:"14px",maxWidth:"400px",textAlign:"center"},children:["❌ ",n]}),l&&r&&(0,t.jsxs)("div",{style:{fontSize:"12px",color:"#666",textAlign:"center",maxWidth:"400px",padding:"10px",backgroundColor:"#d1ecf1",border:"1px solid #bee5eb",borderRadius:"4px"},children:["✅ Microphone active • ",r.getAudioTracks()[0]?.label||"Unknown microphone"]}),t.jsx("div",{style:{fontSize:"12px",color:"#666",textAlign:"center",maxWidth:"400px"},children:"\uD83D\uDCA1 Speak into your microphone to test the audio level. The meter should show activity."})]}):(0,t.jsxs)("div",{style:M,children:[t.jsx("h3",{style:{margin:"0 0 10px 0",color:"#333"},children:"\uD83C\uDFA4 Microphone Test"}),(0,t.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[t.jsx("div",{style:{fontSize:"24px",marginBottom:"10px"},children:"\uD83C\uDFA4"}),t.jsx("div",{children:"Loading microphone interface..."})]})]})}}};