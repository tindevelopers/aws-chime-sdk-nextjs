"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[49],{49:function(e,t,o){o.r(t),o.d(t,{default:function(){return d}});var i=o(5893),n=o(7294);function d(e){let{width:t=480,height:o=360,showControls:d=!0,showDeviceSelection:r=!0,style:l={}}=e,a=(0,n.useRef)(null),[c,s]=(0,n.useState)([]),[u,p]=(0,n.useState)(""),[x,f]=(0,n.useState)(!1),[g,h]=(0,n.useState)(null),[v,y]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=window.__chimeDeviceController,t=window.__chimeDevices;e&&t&&(y(e),s(t.video||[]),t.video&&t.video.length>0&&p(t.video[0].deviceId))},[]);let b=async()=>{if(v&&u)try{console.log("StandaloneVideoPreview: Starting video with device:",u);let e=await navigator.mediaDevices.getUserMedia({video:{deviceId:u},audio:!1});a.current&&(a.current.srcObject=e),h(e),f(!0),console.log("StandaloneVideoPreview: Video started successfully")}catch(e){console.error("StandaloneVideoPreview: Failed to start video:",e)}},m=()=>{g&&(g.getTracks().forEach(e=>e.stop()),h(null)),a.current&&(a.current.srcObject=null),f(!1),console.log("StandaloneVideoPreview: Video stopped")},C=async e=>{p(e),x&&(m(),setTimeout(()=>{b()},100))};(0,n.useEffect)(()=>{u&&c.length>0&&!x&&b()},[u,c.length]);let w={display:"flex",flexDirection:"column",alignItems:"center",gap:"15px",padding:"20px",border:"1px solid #dee2e6",borderRadius:"8px",backgroundColor:"#ffffff",...l};return(0,i.jsxs)("div",{style:w,children:[(0,i.jsx)("h3",{style:{margin:"0 0 10px 0",color:"#232f3e"},children:"\uD83D\uDCF9 Standalone Camera Preview"}),(0,i.jsx)("div",{style:{width:"".concat(t,"px"),height:"".concat(o,"px"),backgroundColor:"#000",borderRadius:"8px",overflow:"hidden",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:x?(0,i.jsx)("video",{ref:a,style:{width:"100%",height:"100%",objectFit:"cover"},autoPlay:!0,muted:!0,playsInline:!0,onLoadedMetadata:()=>console.log("Video metadata loaded"),onCanPlay:()=>console.log("Video can play"),onError:e=>console.error("Video error:",e)}):(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:"16px",textAlign:"center"},children:[(0,i.jsx)("div",{style:{fontSize:"48px",marginBottom:"10px"},children:"\uD83D\uDCF9"}),(0,i.jsx)("div",{children:"Camera Preview"}),(0,i.jsx)("div",{style:{fontSize:"12px",marginTop:"5px",opacity:.8},children:c.length>0?"Click Start to begin preview":"No cameras detected"})]})}),d&&(0,i.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap",justifyContent:"center"},children:[c.length>0&&(0,i.jsx)("select",{value:u,onChange:e=>C(e.target.value),style:{padding:"8px 12px",borderRadius:"6px",border:"1px solid #ced4da",fontSize:"14px"},children:c.map(e=>(0,i.jsx)("option",{value:e.deviceId,children:e.label||"Camera ".concat(c.indexOf(e)+1)},e.deviceId))}),(0,i.jsxs)("button",{onClick:x?m:b,disabled:!u,style:{padding:"8px 16px",borderRadius:"6px",border:"none",cursor:"pointer",fontWeight:"bold",fontSize:"14px",backgroundColor:x?"#dc3545":"#28a745",color:"white"},children:[x?"⏹️ Stop":"▶️ Start"," Camera"]})]}),(0,i.jsx)("div",{style:{fontSize:"12px",color:x?"#28a745":c.length>0?"#6c757d":"#dc3545",textAlign:"center",padding:"8px 12px",backgroundColor:x?"#d4edda":c.length>0?"#e2e3e5":"#f8d7da",borderRadius:"4px",border:"1px solid ".concat(x?"#c3e6cb":c.length>0?"#ced4da":"#f5c6cb")},children:x?"✅ Camera is active":c.length>0?"\uD83D\uDCF1 Camera ready to start":"⚠️ No cameras detected"}),!1]})}}}]);