"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[976],{2976:function(e,r,t){t.r(r),t.d(r,{default:function(){return i}});var o=t(5893),a=t(7294);function i(e){var r;let{width:t=320,height:i=240,style:n={}}=e,c=(0,a.useRef)(null),[d,l]=(0,a.useState)(null),[s,u]=(0,a.useState)(""),[p,x]=(0,a.useState)(!1),[g,m]=(0,a.useState)(!1),[v,f]=(0,a.useState)([]),[h,b]=(0,a.useState)(""),[y,C]=(0,a.useState)(!1);(0,a.useEffect)(()=>{C(!0)},[]);let j=async()=>{if("undefined"==typeof navigator||!navigator.mediaDevices){u("Media devices not supported");return}try{let e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"videoinput"===e.kind);f(e),e.length>0&&!h&&b(e[0].deviceId)}catch(e){console.error("Error enumerating devices:",e),u("Could not access media devices")}},D=async e=>{if("undefined"==typeof navigator||!navigator.mediaDevices){u("Media devices not supported");return}x(!0),u("");try{let r=await navigator.mediaDevices.getUserMedia({video:!e||{deviceId:{exact:e}},audio:!1});l(r),m(!0),c.current&&(c.current.srcObject=r),await j()}catch(e){console.error("Error accessing camera:",e),"NotAllowedError"===e.name?u("Camera access denied. Please allow camera access in your browser settings."):"NotFoundError"===e.name?u("No camera device found."):"NotReadableError"===e.name?u("Camera is already in use by another application."):u("Camera error: ".concat(e.message))}finally{x(!1)}},S=()=>{d&&(d.getTracks().forEach(e=>e.stop()),l(null),m(!1)),c.current&&(c.current.srcObject=null)},w=async e=>{g&&(S(),await D(e)),b(e)};(0,a.useEffect)(()=>(y&&(j(),setTimeout(()=>{D()},500)),()=>{S()}),[y]),(0,a.useEffect)(()=>{c.current&&d&&(c.current.srcObject=d,console.log("Video element updated with stream"))},[d]);let k={display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",...n},E={width:"".concat(t,"px"),height:"".concat(i,"px"),backgroundColor:"#e9ecef",border:"2px dashed #adb5bd",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"#6c757d",fontSize:"14px",textAlign:"center"};return y?(0,o.jsxs)("div",{style:k,children:[(0,o.jsx)("h3",{style:{margin:"0 0 15px 0",color:"#333",textAlign:"center"},children:"\uD83C\uDFA5 Camera Preview"}),v.length>1&&(0,o.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",fontWeight:"bold"},children:"Camera:"}),(0,o.jsx)("select",{value:h,onChange:e=>w(e.target.value),style:{padding:"5px 10px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px"},children:v.map(e=>(0,o.jsx)("option",{value:e.deviceId,children:e.label||"Camera ".concat(e.deviceId.slice(0,8))},e.deviceId))})]}),g&&d?(0,o.jsx)("video",{ref:c,autoPlay:!0,playsInline:!0,muted:!0,style:{width:"".concat(t,"px"),height:"".concat(i,"px"),backgroundColor:"#000",borderRadius:"8px",objectFit:"cover"},onLoadedMetadata:()=>console.log("Video metadata loaded"),onCanPlay:()=>console.log("Video can play"),onError:e=>console.error("Video error:",e)}):(0,o.jsxs)("div",{style:E,children:[(0,o.jsx)("div",{style:{fontSize:"40px",marginBottom:"10px"},children:"\uD83D\uDCF9"}),(0,o.jsx)("div",{children:s?(0,o.jsxs)("div",{style:{color:"#dc3545"},children:["❌ ",s]}):p?"Loading camera...":"Camera Preview"})]}),g&&(0,o.jsxs)("div",{style:{marginTop:"10px",fontSize:"12px",color:"#666"},children:["Stream: ",d?"✅ Active":"❌ None"," | Video Element: ",c.current?"✅ Ready":"❌ Missing"]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[g?(0,o.jsx)("button",{onClick:S,style:{padding:"8px 16px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"\uD83D\uDED1 Stop Camera"}):(0,o.jsx)("button",{onClick:()=>D(h),disabled:p,style:{padding:"8px 16px",backgroundColor:p?"#ccc":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:p?"not-allowed":"pointer",fontSize:"14px"},children:p?"Starting...":"\uD83C\uDFA5 Start Camera"}),(0,o.jsx)("button",{onClick:j,style:{padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"\uD83D\uDD04 Refresh"})]}),s&&(0,o.jsx)("div",{style:{padding:"10px",backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"4px",color:"#721c24",fontSize:"14px",maxWidth:"".concat(t,"px"),textAlign:"center"},children:s}),g&&d&&(0,o.jsxs)("div",{style:{fontSize:"12px",color:"#666",textAlign:"center",maxWidth:"".concat(t,"px")},children:["✅ Camera active • ",(null===(r=d.getVideoTracks()[0])||void 0===r?void 0:r.label)||"Unknown camera"]})]}):(0,o.jsx)("div",{style:k,children:(0,o.jsxs)("div",{style:E,children:[(0,o.jsx)("div",{children:"\uD83C\uDFA5"}),(0,o.jsx)("div",{style:{marginTop:"8px"},children:"Loading camera interface..."})]})})}}}]);