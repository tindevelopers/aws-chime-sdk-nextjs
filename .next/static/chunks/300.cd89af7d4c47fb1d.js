"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[300],{8206:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var r=n(5893),i=n(7294),s=n(4080);function o(e){let{title:t="Meeting Chat",currentUserId:n="current-user",currentUserName:o="You",showCloseButton:a=!0,onClose:l,width:d=320,height:c=400,style:g={}}=e,[p,x]=(0,i.useState)([]),[u,h]=(0,i.useState)(""),[m,f]=(0,i.useState)(!1),y=(0,s.LoD)(),b=(0,i.useRef)(null),v=(0,i.useRef)(null);(0,i.useEffect)(()=>{var e;null===(e=b.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[p]),(0,i.useEffect)(()=>{if(y)return y.realtimeSubscribeToReceiveDataMessage("chat",e=>{try{let{message:t,senderId:r,senderName:i,timestamp:s}=e&&e.json()||{};if(t){let e={id:"".concat(Date.now(),"-").concat(Math.random()),senderId:r,senderName:i||"Unknown",content:t,timestamp:s||new Date().toLocaleTimeString(),variant:r===n?"outgoing":"incoming"};x(t=>[...t,e])}}catch(e){console.error("Error processing chat message:",e)}}),y.realtimeSubscribeToReceiveDataMessage("typing",e=>{try{let{isTyping:t,senderId:r}=e&&e.json()||{};r!==n&&(f(t),t&&setTimeout(()=>f(!1),3e3))}catch(e){console.error("Error processing typing indicator:",e)}}),()=>{y.realtimeUnsubscribeFromReceiveDataMessage("chat"),y.realtimeUnsubscribeFromReceiveDataMessage("typing")}},[y,n]);let j=()=>{if(!y||!u.trim())return;let e=new Date().toLocaleTimeString(),t={message:u.trim(),senderId:n,senderName:o,timestamp:e};try{y.realtimeSendDataMessage("chat",t,3e4),h(""),v.current&&v.current.focus()}catch(e){console.error("Error sending chat message:",e)}},D=e=>{if(y)try{y.realtimeSendDataMessage("typing",{isTyping:e,senderId:n},5e3)}catch(e){console.error("Error sending typing indicator:",e)}},S={width:"".concat(d,"px"),height:"".concat(c,"px"),backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",border:"1px solid #e0e0e0",display:"flex",flexDirection:"column",overflow:"hidden",...g};return(0,r.jsxs)("div",{style:S,children:[(0,r.jsxs)("div",{style:{padding:"15px",backgroundColor:"#f8f9fa",borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{style:{margin:"0",fontSize:"16px",color:"#333"},children:["\uD83D\uDCAC ",t]}),p.length>0&&(0,r.jsxs)("div",{style:{fontSize:"12px",color:"#666",marginTop:"2px"},children:[p.length," message",1!==p.length?"s":""]})]}),a&&(0,r.jsx)("button",{onClick:()=>{l&&l()},style:{background:"none",border:"none",fontSize:"18px",cursor:"pointer",color:"#666",padding:"5px"},title:"Close chat",children:"âœ•"})]}),(0,r.jsx)("div",{style:{flex:1,overflowY:"auto",padding:"10px",backgroundColor:"#fafafa"},children:0===p.length?(0,r.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",color:"#666"},children:[(0,r.jsx)("div",{style:{fontSize:"48px",marginBottom:"15px"},children:"\uD83D\uDCAC"}),(0,r.jsx)("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"No messages yet"}),(0,r.jsx)("div",{style:{fontSize:"14px"},children:"Start the conversation by sending a message below"})]}):(0,r.jsxs)(r.Fragment,{children:[p.map((e,t)=>{let n=0===t||p[t-1].senderId!==e.senderId,i=t===p.length-1||p[t+1].senderId!==e.senderId;return(0,r.jsx)(s.nu2,{timestamp:e.timestamp,style:{marginBottom:"8px"},children:(0,r.jsx)(s.IWH,{variant:e.variant,senderName:n?e.senderName:void 0,showTail:i,style:{maxWidth:"80%",wordBreak:"break-word"},children:e.content})},e.id)}),m&&(0,r.jsx)("div",{style:{padding:"10px",fontSize:"12px",color:"#666",fontStyle:"italic"},children:"Someone is typing..."}),(0,r.jsx)("div",{ref:b})]})}),(0,r.jsxs)("div",{style:{padding:"15px",backgroundColor:"white",borderTop:"1px solid #e0e0e0",display:"flex",gap:"10px",alignItems:"flex-end"},children:[(0,r.jsx)(s.IIB,{ref:v,value:u,onChange:e=>{h(e.target.value),e.target.value.length>0?D(!0):D(!1)},onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),j(),D(!1))},placeholder:"Type a message...",showClear:!1,style:{flex:1}}),(0,r.jsx)(s.KMU,{label:"Send",onClick:j,disabled:!u.trim(),style:{minWidth:"60px",opacity:u.trim()?1:.5}})]}),(0,r.jsx)("div",{style:{padding:"8px 15px",backgroundColor:"#f8f9fa",borderTop:"1px solid #e0e0e0",fontSize:"11px",color:"#666",textAlign:"center"},children:"\uD83D\uDCA1 Messages are shared with all meeting participants"})]})}}}]);