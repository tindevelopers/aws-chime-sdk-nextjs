(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[542],{2281:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/production-meeting",function(){return n(8550)}])},2602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return s},noSSR:function(){return o}});let i=n(8754);n(5893),n(7294);let l=i._(n(5491));function r(e){return{default:(null==e?void 0:e.default)||e}}function o(e,t){return delete t.webpack,delete t.modules,e(t)}function s(e,t){let n=l.default,i={loading:e=>{let{error:t,isLoading:n,pastDelay:i}=e;return null}};e instanceof Promise?i.loader=()=>e:"function"==typeof e?i.loader=e:"object"==typeof e&&(i={...i,...e});let s=(i={...i,...t}).loader;return(i.loadableGenerated&&(i={...i,...i.loadableGenerated},delete i.loadableGenerated),"boolean"!=typeof i.ssr||i.ssr)?n({...i,loader:()=>null!=s?s().then(r):Promise.resolve(r(()=>null))}):(delete i.webpack,delete i.modules,o(n,i))}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},1159:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LoadableContext",{enumerable:!0,get:function(){return i}});let i=n(8754)._(n(7294)).default.createContext(null)},5491:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return p}});let i=n(8754)._(n(7294)),l=n(1159),r=[],o=[],s=!1;function a(e){let t=e(),n={loading:!0,loaded:null,error:null};return n.promise=t.then(e=>(n.loading=!1,n.loaded=e,e)).catch(e=>{throw n.loading=!1,n.error=e,e}),n}class d{promise(){return this._res.promise}retry(){this._clearTimeouts(),this._res=this._loadFn(this._opts.loader),this._state={pastDelay:!1,timedOut:!1};let{_res:e,_opts:t}=this;e.loading&&("number"==typeof t.delay&&(0===t.delay?this._state.pastDelay=!0:this._delay=setTimeout(()=>{this._update({pastDelay:!0})},t.delay)),"number"==typeof t.timeout&&(this._timeout=setTimeout(()=>{this._update({timedOut:!0})},t.timeout))),this._res.promise.then(()=>{this._update({}),this._clearTimeouts()}).catch(e=>{this._update({}),this._clearTimeouts()}),this._update({})}_update(e){this._state={...this._state,error:this._res.error,loaded:this._res.loaded,loading:this._res.loading,...e},this._callbacks.forEach(e=>e())}_clearTimeouts(){clearTimeout(this._delay),clearTimeout(this._timeout)}getCurrentValue(){return this._state}subscribe(e){return this._callbacks.add(e),()=>{this._callbacks.delete(e)}}constructor(e,t){this._loadFn=e,this._opts=t,this._callbacks=new Set,this._delay=null,this._timeout=null,this.retry()}}function u(e){return function(e,t){let n=Object.assign({loader:null,loading:null,delay:200,timeout:null,webpack:null,modules:null},t),r=null;function a(){if(!r){let t=new d(e,n);r={getCurrentValue:t.getCurrentValue.bind(t),subscribe:t.subscribe.bind(t),retry:t.retry.bind(t),promise:t.promise.bind(t)}}return r.promise()}if(!s){let e=n.webpack?n.webpack():n.modules;e&&o.push(t=>{for(let n of e)if(t.includes(n))return a()})}function u(e,t){!function(){a();let e=i.default.useContext(l.LoadableContext);e&&Array.isArray(n.modules)&&n.modules.forEach(t=>{e(t)})}();let o=i.default.useSyncExternalStore(r.subscribe,r.getCurrentValue,r.getCurrentValue);return i.default.useImperativeHandle(t,()=>({retry:r.retry}),[]),i.default.useMemo(()=>{var t;return o.loading||o.error?i.default.createElement(n.loading,{isLoading:o.loading,pastDelay:o.pastDelay,timedOut:o.timedOut,error:o.error,retry:r.retry}):o.loaded?i.default.createElement((t=o.loaded)&&t.default?t.default:t,e):null},[e,o])}return u.preload=()=>a(),u.displayName="LoadableComponent",i.default.forwardRef(u)}(a,e)}function c(e,t){let n=[];for(;e.length;){let i=e.pop();n.push(i(t))}return Promise.all(n).then(()=>{if(e.length)return c(e,t)})}u.preloadAll=()=>new Promise((e,t)=>{c(r).then(e,t)}),u.preloadReady=e=>(void 0===e&&(e=[]),new Promise(t=>{let n=()=>(s=!0,t());c(o,e).then(n,n)})),window.__NEXT_PRELOADREADY=u.preloadReady;let p=u},8550:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var i=n(5893),l=n(7294),r=n(1163),o=n(5152),s=n.n(o),a=n(6730);let d=s()(()=>Promise.resolve(u),{ssr:!1,loading:()=>(0,i.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:"Loading meeting..."})});function u(){let e=(0,r.useRouter)(),t=(0,a.fjl)(),[n,o]=(0,l.useState)(null),[s,d]=(0,l.useState)(!1),[u,c]=(0,l.useState)(!1),[p,h]=(0,l.useState)(!1),[f,g]=(0,l.useState)(!1),[x,y]=(0,l.useState)(null),{muted:m}=(0,a.HI)(),{isVideoEnabled:j}=(0,a.Onx)(),b=(0,a.EJc)().isLocalUserSharing||!1,{tiles:_}=(0,a.akC)(),D=(0,a.dpf)();(0,l.useEffect)(()=>{let e=localStorage.getItem("chime-setup-data");if(e)try{let t=JSON.parse(e);o(t)}catch(e){console.error("Failed to parse setup data:",e),y("Invalid setup data. Please run device setup first.")}else y("No setup data found. Please complete device setup first.")},[]),(0,l.useEffect)(()=>{!n||u||s||v()},[n,u,s]),(0,l.useEffect)(()=>{D===a.ytK.Succeeded?(c(!0),d(!1)):D===a.ytK.Failed&&(y("Failed to join meeting. Please check your connection and try again."),d(!1))},[D]);let v=async()=>{if(n){d(!0),y(null);try{console.log("ProductionMeeting: Joining meeting with setup data:",n);let e=await fetch("/api/join",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({MeetingId:n.meetingId,Name:n.userName})});if(!e.ok)throw Error("Failed to join meeting: ".concat(e.statusText));let t=await e.json();sessionStorage.setItem("chime-meeting-data",JSON.stringify({Meeting:t.Meeting,Attendee:t.Attendee,setupData:n})),c(!0),d(!1),console.log("ProductionMeeting: Successfully joined meeting")}catch(e){console.error("ProductionMeeting: Failed to join meeting:",e),y("Failed to join meeting: ".concat(e.message)),d(!1)}}},C=async()=>{try{await t.leave(),localStorage.removeItem("chime-setup-data"),e.push("/")}catch(e){console.error("Failed to leave meeting:",e)}},S={minHeight:"100vh",backgroundColor:"#1a1a1a",color:"white",fontFamily:"system-ui"},w=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{padding:"10px 15px",borderRadius:"6px",border:"none",backgroundColor:e?"#007bff":"#6c757d",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"bold",transition:"background-color 0.2s ease"}};return x?(0,i.jsx)("div",{style:S,children:(0,i.jsxs)("div",{style:{backgroundColor:"#dc3545",color:"white",padding:"20px",borderRadius:"8px",margin:"20px",textAlign:"center"},children:[(0,i.jsx)("h2",{children:"❌ Meeting Error"}),(0,i.jsx)("p",{children:x}),(0,i.jsx)("button",{onClick:()=>e.push("/setup"),style:w(),children:"\uD83D\uDD27 Run Device Setup"}),(0,i.jsx)("button",{onClick:()=>e.push("/"),style:{...w(),marginLeft:"10px"},children:"\uD83C\uDFE0 Home"})]})}):n?(0,i.jsxs)("div",{style:S,children:[(0,i.jsxs)("div",{style:{backgroundColor:"#232f3e",padding:"15px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 10px rgba(0,0,0,0.3)"},children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("h1",{style:{margin:0,fontSize:"24px"},children:["\uD83D\uDCF9 ",n.meetingId]}),(0,i.jsxs)("div",{style:{fontSize:"14px",opacity:.8},children:[n.userName," • ",u?"".concat(_.length+1," participants"):"Joining..."]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,i.jsx)("button",{onClick:()=>h(!p),style:w(p),children:"\uD83D\uDC65 Roster"}),(0,i.jsx)("button",{onClick:()=>g(!f),style:w(f),children:"\uD83D\uDCAC Chat"}),(0,i.jsx)("button",{onClick:C,style:{...w(),backgroundColor:"#dc3545"},children:"\uD83D\uDEAA Leave"})]})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:p||f?"1fr 300px":"1fr",height:"calc(100vh - 140px)",gap:"10px",padding:"10px"},children:[(0,i.jsx)("div",{style:{backgroundColor:"#2a2a2a",borderRadius:"10px",overflow:"hidden",position:"relative"},children:s?(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",flexDirection:"column",gap:"20px"},children:[(0,i.jsx)("div",{style:{fontSize:"60px"},children:"⏳"}),(0,i.jsx)("div",{style:{fontSize:"24px"},children:"Joining Meeting..."}),(0,i.jsx)("div",{style:{fontSize:"16px",opacity:.7},children:"Setting up audio and video connections"})]}):u?(0,i.jsx)(a.MB9,{layout:"featured",noRemoteVideoView:(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",flexDirection:"column",color:"#999"},children:[(0,i.jsx)("div",{style:{fontSize:"60px",marginBottom:"20px"},children:"\uD83D\uDC64"}),(0,i.jsx)("div",{style:{fontSize:"24px"},children:"Waiting for participants..."}),(0,i.jsxs)("div",{style:{fontSize:"16px",marginTop:"10px"},children:["Share the meeting ID: ",(0,i.jsx)("strong",{children:n.meetingId})]})]})}):(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:(0,i.jsx)("div",{style:{fontSize:"24px"},children:"Preparing meeting..."})})}),(p||f)&&(0,i.jsxs)("div",{style:{backgroundColor:"#333",borderRadius:"10px",padding:"20px",overflowY:"auto"},children:[p&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{style:{marginTop:0},children:"\uD83D\uDC65 Participants"}),(0,i.jsx)(a.ZLk,{})]}),f&&(0,i.jsxs)("div",{style:{marginTop:p?"30px":"0"},children:[(0,i.jsx)("h3",{style:{marginTop:0},children:"\uD83D\uDCAC Chat"}),(0,i.jsx)("div",{style:{color:"#ccc",textAlign:"center",padding:"20px"},children:"\uD83D\uDCAC Chat feature would be implemented here using Component Library ChatBubble"})]})]})]}),(0,i.jsxs)("div",{style:{backgroundColor:"#232f3e",padding:"15px 20px",display:"flex",justifyContent:"center",gap:"15px",alignItems:"center"},children:[(0,i.jsx)(a._nn,{}),(0,i.jsx)(a.Zr5,{}),(0,i.jsx)(a.Eid,{}),(0,i.jsx)(a.aUr,{}),(0,i.jsx)(a.jSZ,{}),(0,i.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center",marginLeft:"20px",fontSize:"14px"},children:[(0,i.jsx)("span",{style:{color:m?"#dc3545":"#28a745"},children:m?"\uD83D\uDD07":"\uD83C\uDFA4"}),(0,i.jsx)("span",{style:{color:j?"#28a745":"#dc3545"},children:j?"\uD83D\uDCF9":"\uD83D\uDCF9\uD83D\uDEAB"}),b&&(0,i.jsx)("span",{style:{color:"#007bff"},children:"\uD83D\uDDA5️"})]})]})]}):(0,i.jsx)("div",{style:S,children:(0,i.jsxs)("div",{style:{textAlign:"center",padding:"40px"},children:[(0,i.jsx)("div",{style:{fontSize:"40px",marginBottom:"15px"},children:"⏳"}),(0,i.jsx)("div",{children:"Loading setup data..."})]})})}function c(){return(0,i.jsx)(a.lUb,{children:(0,i.jsx)(d,{})})}},5152:function(e,t,n){e.exports=n(2602)},1163:function(e,t,n){e.exports=n(3079)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=2281)}),_N_E=e.O()}]);