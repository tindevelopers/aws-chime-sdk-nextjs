"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[886],{6886:function(e,r,o){o.r(r),o.d(r,{default:function(){return n}});var t=o(5893),i=o(7294);function n(e){var r;let{style:o={}}=e,[n,d]=(0,i.useState)(null),[c,a]=(0,i.useState)(""),[l,s]=(0,i.useState)(!1),[u,p]=(0,i.useState)(!1),[x,h]=(0,i.useState)([]),[f,g]=(0,i.useState)(""),[b,v]=(0,i.useState)(0),[y,m]=(0,i.useState)(!1),D=(0,i.useRef)(null),w=(0,i.useRef)(null),S=(0,i.useRef)();(0,i.useEffect)(()=>{m(!0)},[]);let C=async()=>{if("undefined"==typeof navigator||!navigator.mediaDevices){a("Media devices not supported");return}try{let e=(await navigator.mediaDevices.enumerateDevices()).filter(e=>"audioinput"===e.kind);h(e),e.length>0&&!f&&g(e[0].deviceId)}catch(e){console.error("Error enumerating devices:",e),a("Could not access media devices")}},j=e=>{try{D.current=new(window.AudioContext||window.webkitAudioContext),w.current=D.current.createAnalyser(),D.current.createMediaStreamSource(e).connect(w.current),w.current.fftSize=256;let r=w.current.frequencyBinCount,o=new Uint8Array(r),t=()=>{if(w.current){w.current.getByteFrequencyData(o);let e=0;for(let t=0;t<r;t++)e+=o[t];let t=e/r;v(Math.floor(t/255*100))}S.current=requestAnimationFrame(t)};t()}catch(e){console.error("Error setting up audio analysis:",e)}},k=()=>{S.current&&cancelAnimationFrame(S.current),D.current&&(D.current.close(),D.current=null),w.current=null,v(0)},A=async e=>{s(!0),a("");try{let r=await navigator.mediaDevices.getUserMedia({audio:!e||{deviceId:{exact:e}},video:!1});d(r),p(!0),j(r),await C()}catch(e){console.error("Error accessing microphone:",e),"NotAllowedError"===e.name?a("Microphone access denied. Please allow microphone access in your browser settings."):"NotFoundError"===e.name?a("No microphone device found."):"NotReadableError"===e.name?a("Microphone is already in use by another application."):a("Microphone error: ".concat(e.message))}finally{s(!1)}},M=()=>{n&&(n.getTracks().forEach(e=>e.stop()),d(null),p(!1)),k()},R=async e=>{u&&(M(),await A(e)),g(e)};(0,i.useEffect)(()=>(y&&C(),()=>{M()}),[y]);let z={display:"flex",flexDirection:"column",alignItems:"center",gap:"15px",padding:"20px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f9f9f9",...o};return y?(0,t.jsxs)("div",{style:z,children:[(0,t.jsx)("h3",{style:{margin:"0 0 10px 0",color:"#333"},children:"\uD83C\uDFA4 Microphone Test"}),x.length>1&&(0,t.jsxs)("div",{style:{width:"100%",maxWidth:"300px"},children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"5px",fontSize:"14px",fontWeight:"bold"},children:"Microphone:"}),(0,t.jsx)("select",{value:f,onChange:e=>R(e.target.value),style:{width:"100%",padding:"8px 12px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px"},children:x.map(e=>(0,t.jsx)("option",{value:e.deviceId,children:e.label||"Microphone ".concat(e.deviceId.slice(0,8))},e.deviceId))})]}),(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsxs)("div",{style:{marginBottom:"8px",fontSize:"14px",fontWeight:"bold"},children:["Audio Level: ",b,"%"]}),(0,t.jsx)("div",{style:{width:"200px",height:"20px",backgroundColor:"#e9ecef",borderRadius:"10px",overflow:"hidden",border:"1px solid #adb5bd"},children:(0,t.jsx)("div",{style:{width:"".concat(b,"%"),height:"100%",backgroundColor:b>70?"#dc3545":b>30?"#ffc107":"#28a745",transition:"width 0.1s ease",borderRadius:"10px"}})}),(0,t.jsx)("div",{style:{marginTop:"5px",fontSize:"12px",color:"#666"},children:b>0?"\uD83C\uDFB5 Audio detected":"\uD83D\uDD07 No audio"})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[u?(0,t.jsx)("button",{onClick:M,style:{padding:"10px 20px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"\uD83D\uDED1 Stop Microphone"}):(0,t.jsx)("button",{onClick:()=>A(f),disabled:l,style:{padding:"10px 20px",backgroundColor:l?"#ccc":"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:l?"not-allowed":"pointer",fontSize:"14px",fontWeight:"bold"},children:l?"Starting...":"\uD83C\uDFA4 Start Microphone"}),(0,t.jsx)("button",{onClick:C,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"\uD83D\uDD04 Refresh"})]}),c&&(0,t.jsxs)("div",{style:{padding:"15px",backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",borderRadius:"4px",color:"#721c24",fontSize:"14px",maxWidth:"400px",textAlign:"center"},children:["❌ ",c]}),u&&n&&(0,t.jsxs)("div",{style:{fontSize:"12px",color:"#666",textAlign:"center",maxWidth:"400px",padding:"10px",backgroundColor:"#d1ecf1",border:"1px solid #bee5eb",borderRadius:"4px"},children:["✅ Microphone active • ",(null===(r=n.getAudioTracks()[0])||void 0===r?void 0:r.label)||"Unknown microphone"]}),(0,t.jsx)("div",{style:{fontSize:"12px",color:"#666",textAlign:"center",maxWidth:"400px"},children:"\uD83D\uDCA1 Speak into your microphone to test the audio level. The meter should show activity."})]}):(0,t.jsxs)("div",{style:z,children:[(0,t.jsx)("h3",{style:{margin:"0 0 10px 0",color:"#333"},children:"\uD83C\uDFA4 Microphone Test"}),(0,t.jsxs)("div",{style:{textAlign:"center",padding:"20px"},children:[(0,t.jsx)("div",{style:{fontSize:"24px",marginBottom:"10px"},children:"\uD83C\uDFA4"}),(0,t.jsx)("div",{children:"Loading microphone interface..."})]})]})}}}]);