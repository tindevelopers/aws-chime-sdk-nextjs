"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[870],{870:function(e,t,i){i.r(t),i.d(t,{default:function(){return a}});var l=i(5893),n=i(7294),r=i(6730);function a(e){let{width:t=320,height:i=240,showControls:a=!0,showBackgroundBlur:o=!0,style:c={}}=e,{isVideoEnabled:d,toggleVideo:s}=(0,r.Onx)(),{devices:u,selectedDevice:f}=(0,r.ULf)(),x=(0,r.fjl)(),[h,g]=(0,n.useState)(!0),[p,v]=(0,n.useState)(!1),[b,m]=(0,n.useState)(!1),y=(0,n.useRef)(null),[j,C]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{if(u.length>0&&!f&&!p){console.log("Initializing video device selection...");let e=u[0];await x.selectVideoInputDevice(e),v(!0),console.log("Video device initialized:",e.label)}}catch(e){console.error("Failed to initialize video device:",e),m(!0)}})()},[u,f,x,p]),(0,n.useEffect)(()=>((async()=>{if(b&&!j&&y.current)try{console.log("Starting fallback video stream...");let e=await navigator.mediaDevices.getUserMedia({video:{width:t,height:i},audio:!1});C(e),y.current.srcObject=e,y.current.play(),console.log("Fallback video stream started")}catch(e){console.error("Failed to start fallback video:",e)}})(),()=>{j&&(j.getTracks().forEach(e=>e.stop()),C(null))}),[b,j,t,i]),(0,n.useEffect)(()=>{let e=setTimeout(()=>{f||j||b||0!==u.length||(console.log("Timeout reached, enabling fallback mode..."),m(!0))},3e3);return()=>clearTimeout(e)},[f,j,b,u.length]);let D=e=>{if(!e)return"None";if("string"==typeof e){let t=u.find(t=>t.deviceId===e);return(null==t?void 0:t.label)||e}if(e.label)return e.label;if(e.deviceId){let t=u.find(t=>t.deviceId===e.deviceId);return(null==t?void 0:t.label)||e.deviceId}return"Unknown"},k={display:"flex",flexDirection:"column",alignItems:"center",gap:"15px",padding:"20px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f9f9f9",...c};return(0,l.jsxs)("div",{style:k,children:[(0,l.jsx)("h3",{style:{margin:"0 0 15px 0",color:"#333",textAlign:"center"},children:"\uD83C\uDFA5 Enhanced Camera Preview"}),(0,l.jsx)("div",{style:{width:"".concat(t,"px"),height:"".concat(i,"px"),backgroundColor:"#000",borderRadius:"8px",overflow:"hidden",position:"relative"},children:b&&j?(0,l.jsx)("video",{ref:y,style:{width:"100%",height:"100%",objectFit:"cover"},autoPlay:!0,muted:!0,playsInline:!0}):h&&f?(0,l.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(r.Q_v,{})}):d?(0,l.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,l.jsx)(r.OuP,{})}):(0,l.jsxs)("div",{style:{width:"100%",height:"100%",backgroundColor:"#e9ecef",border:"2px dashed #adb5bd",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"#6c757d",fontSize:"14px",textAlign:"center"},children:[(0,l.jsx)("div",{style:{fontSize:"40px",marginBottom:"10px"},children:"\uD83D\uDCF9"}),(0,l.jsx)("div",{children:"Camera is off"}),(0,l.jsx)("div",{style:{fontSize:"12px",marginTop:"5px",color:"#666"},children:0===u.length?"No cameras detected":"Click the camera button below to start"})]})}),a&&(0,l.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"center",flexWrap:"wrap",justifyContent:"center"},children:[(0,l.jsx)(r.Zr5,{label:"Camera"}),o&&(0,l.jsx)(r.V8F,{backgroundBlurLabel:"Background Blur"})]}),(0,l.jsx)("div",{style:{fontSize:"12px",color:b&&j||h&&f||d?"#28a745":"#6c757d",textAlign:"center",padding:"8px 12px",backgroundColor:b&&j||h&&f||d?"#d4edda":"#e2e3e5",borderRadius:"4px",border:"1px solid ".concat(b&&j||h&&f||d?"#c3e6cb":"#ced4da")},children:b&&j?"✅ Camera active (Direct Mode)":h&&f||d?"✅ Camera active: ".concat(D(f)):f?"\uD83D\uDCF1 Camera ready: ".concat(D(f)):u.length>0?"\uD83D\uDD04 Initializing camera...":"⚠️ No cameras detected"}),!1,(0,l.jsxs)("div",{style:{fontSize:"12px",color:"#666",textAlign:"center",maxWidth:"".concat(t,"px"),lineHeight:"1.4"},children:["\uD83D\uDCA1 ",(0,l.jsx)("strong",{children:"Tip:"})," Click the camera button to toggle video on/off. Use the dropdown to switch between cameras.",o&&" Background blur can be applied for professional appearance."]})]})}}}]);